.TH udpsvd 8
.SH NAME
udpsvd \- UDP/IP service daemon
.SH SYNOPSIS
.B udpsvd
[\-nhv] [\-u
.I user\fR] [\-i
.IR dir |\-x
.I cdb\fR]
.I host
.I port
.I prog
.SH DESCRIPTION
.B udpsvd
creates an UDP/IP socket, binds it to the address
.IR host :\fIprog\fR,
and listens on the socket for incoming datagrams.
.P
If a datagram is available on the socket,
.B udpsvd
conditionally starts a program, with standard input reading from the socket,
and standard output writing to the socket, to handle this, and possibly more,
datagrams.
.B udpsvd
does not start the program if another program that it has started before
still is running.
If the program exits,
.B udpsvd
again listens to the socket until a new datagram is available.
.P
.B udpsvd
optionally checks for special intructions depending on the IP address of the
client sending the datagram which not yet was handled by a running program,
see
.BR ipsvd-instruct (5)
for details.
.P
.SS ATTENTION:
UDP is a connectionless protocol.
Most programs that handle user datagrams, such as
.BR talkd (8),
keep running after receiving a datagram, and process subsequent datagrams
sent to the socket until a timeout is reached.
.B udpsvd
only checks special instructions for a datagram that causes a startup of
the program; not if a program handling datagrams already is running.
It doesn't make much sense to restrict access through special instructions
when using such a program.
.P
On the other hand, it makes perfectly sense with programs like
.BR tftpd (8),
that fork to establish a separate connection to the client when receiving
the datagram.
In general it's adequate to set up special instructions for programs that
should be run by tcpwrapper.
.SH OPTIONS
.TP
.I host
.I host
either is a hostname, or a dotted-decimal IP address, or 0.
If
.I host
is 0,
.B udpsvd
accepts datagrams to any local IP address.
.TP
.I port
.B udpsvd
accepts datagrams to
.IR host :\fIport\fR.
.TP
.I prog
.I prog
consists of one or more arguments.
.B udpsvd
normally runs
.I prog
to handle a datagram, and possibly more, that is sent to
the socket, if there is no program that was started before by
.B udpsvd
still running and handling datagrams.
.TP
.B \-u \fIuser
drop permissions.
Switch user ID to
.IR user 's
UID, and group ID to
.IR user 's
primary GID after creating and binding to the socket.
.TP
.B \-i \fIdir
read instructions for handling new connections from the instructions
directory
.IR dir .
See
.BR ipsvd-instruct (5)
for details.
.TP
.B \-x \fIcdb
read instructions for handling new connections from the constant database
.IR cdb .
The constant database normally is created from an instructions directory by
running
.BR ipsvd-cdb (8).
.TP
.B \-n
Discard a datagram instead of starting
.I prog
to handle it, if there is no program still running handling datagrams, and if
there are no special intructions for the client that sent the datagram.
.TP
.B \-h
Look up client's hostname in DNS.
.TP
.B -v
verbose.
Print verbose messages to standard output.
.SH SEE ALSO
ipsvd(7),
tcpsvd(8),
ipsvd-instruct(5),
ipsvd-cdb(8)
.P
http://smarden.org/ipsvd/
.SH AUTHOR
Gerrit Pape <pape@smarden.org>
